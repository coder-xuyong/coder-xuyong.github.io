---
title: java é«˜çº§
categories:
  - 1.Java
  - 1.JavaSE
  - 1.åŸºç¡€ç‰¹æ€§
tags:
  - Java
series:
  - åŸºç¡€ç‰¹æ€§
order: 3
abbrlink: 9dd42db4
date: 2025-08-30 16:16:53
---
## Java é«˜çº§



### æ•°æ®ç»“æ„
æ•°ç»„ã€åˆ—è¡¨ã€é›†åˆã€æ˜ å°„ã€æ ˆã€é˜Ÿåˆ—ã€å †ã€æ ‘ã€‚

### Java é›†åˆæ¡†æ¶
![Java é›†åˆæ¶æ„å›¾](https://www.runoob.com/wp-content/uploads/2014/01/2243690-9cd9c896e0d512ed.gif)

[ç‚¹å‡»æŸ¥çœ‹UMLå›¾](https://www.cnblogs.com/Bytezero/p/15270427.html)

| ç±»å‹                | æè¿°            | ç‰¹ç‚¹                                  | å¸¸ç”¨å®ç°ç±»                                                                      |
|-------------------|---------------|-------------------------------------|----------------------------------------------------------------------------|
| **`Collection`**  | å•åˆ—æ•°æ®é›†åˆçš„æ ¹æ¥å£    | å­˜å‚¨ä¸€ç»„å¯¹è±¡çš„å®¹å™¨                           | (å®ƒä¸‹é¢æœ‰Listå’ŒSet)                                                             |
| **`List`**        | **æœ‰åºã€å¯é‡å¤**çš„é›†åˆ | æœ‰ç´¢å¼•ï¼Œå…è®¸é‡å¤ï¼Œå…ƒç´ æœ‰é¡ºåº                      | **`ArrayList`**, **`LinkedList`**, `Vector`                                |
| **`Set`**         | **å”¯ä¸€ã€æ— åº**çš„é›†åˆ  | æ— ç´¢å¼•ï¼Œä¸å…è®¸é‡å¤å…ƒç´ ï¼Œä¸ä¿è¯é¡ºåº                   | **`HashSet`**ï¼ˆæ— åºï¼‰, **`LinkedHashSet`**(æœ‰åº), **`TreeSet`**(å‡åº)              |
| **`Map`**         | **åŒåˆ—æ•°æ®**çš„é›†åˆ   | å­˜å‚¨**é”®å€¼å¯¹(Key-Value)**ï¼ŒKeyå”¯ä¸€ï¼Œæ’åºç”±keyå†³å®š | **`HashMap`**ï¼ˆæ— åºï¼‰, **`LinkedHashMap`**ï¼ˆæœ‰åºï¼‰, **`TreeMap`**ï¼ˆå‡åºï¼‰, `Hashtable` |
| **`Collections`** | **æ“ä½œé›†åˆçš„å·¥å…·ç±»**  | æä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œç”¨äºå¯¹é›†åˆè¿›è¡Œæ’åºã€æœç´¢ã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰æ“ä½œ    | (è¿™æ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œä¸æ˜¯æ¥å£)                                                             |



#### å•åˆ—é›†åˆéå†

1. iterator

```java
List<Integer> list = new ArrayList<>();
list.add(1);
list.add(2);
list.add(3);
Iterator it = list.iterator();
while (it.hasNext()) {
    System.out.println(it.next());
}
```
2. å¢å¼º for å¾ªç¯ï¼Œå¯ä»¥éå†é›†åˆå’Œæ•°ç»„

3. lambda è¡¨è¾¾å¼ `default void forEach(Consumer<? super T> action)`
```java
arr.forEach(e -> System.out.println(1))
```

> é›†åˆä¸­ï¼Œè¾¹éå†è¾¹å¢åˆ ï¼Œåªèƒ½ä½¿ç”¨è¿­ä»£å™¨ã€‚

#### åŒåˆ—é›†åˆéå†
1. é”®æ‰¾å€¼
```java
HashMap<String,Integer> map = new HashMap();
Set<String> keys = map.keySet();
for(String key: keys){
    Integer val = map.get(key);
}
// Collection<Integer> values =map.values();
```

2. é”®å€¼å¯¹ 
```java
Set< Map.Entry<string,Integer> entries = map.entryset();
for(Map.Entry<string, Integer>entry :entries){
    String key = entry.getKey();
    Integer value = entry.getValue();
    System.out.println(key +"====>" + value);
}
```

3. lambda è¡¨è¾¾å¼ `default void forEach(BigConsumer<? super K,? super V> action)`
éœ€è¦ç”¨åˆ°forEachæ–¹æ³•
```java
map.forEach((k,v)->{
    // xxx
})
```
#### List
##### ArrayList

![ArrayList](https://www.runoob.com/wp-content/uploads/2020/06/ArrayList-1-768x406-1.png)
å®ƒå¯ä»¥åŠ¨æ€ä¿®æ”¹æ•°ç»„ï¼Œæ²¡æœ‰å›ºå®šå¤§å°ï¼Œå¯ä»¥åˆ é™¤å’Œæ·»åŠ å…ƒç´ ã€‚
**ç‰¹ç‚¹**ï¼šæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢
**åº•å±‚åŸç†**ï¼šåº•å±‚é‡‡ç”¨æ•°ç»„å­˜å‚¨å…ƒç´ ï¼Œé»˜è®¤æ„é€ å™¨åˆå§‹åŒ– size æ˜¯0ï¼Œç¬¬ä¸€æ¬¡ add size æ‰©å®¹ä¸º 10ã€‚oldCapacity >> 1ï¼Œç›¸å½“äº*1/2ï¼Œä¹Ÿå°±æ˜¯æ‰©å®¹ä¸ºåŸæ¥çš„1.5å€ã€‚

è¯¦ç»†apiæ–¹æ³•å¯ä»¥æŸ¥çœ‹ï¼š[å®˜æ–¹APIæ–‡æ¡£](https://docs.oracle.com/javase/8/docs/api/index.html)

##### LinkedList
é“¾è¡¨ï¼ˆLinked listï¼‰æ˜¯ä¸€ç§çº¿æ€§è¡¨ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæŒ‰çº¿æ€§çš„é¡ºåºå­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹é‡Œå­˜åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ã€‚
é“¾è¡¨å¯ä»¥åˆ†ä¸ºå•é“¾è¡¨å’ŒåŒé“¾è¡¨ã€‚

**ç‰¹ç‚¹**ï¼šæŸ¥è¯¢æ…¢ï¼Œå¢åˆ ç›¸å¯¹å¿«ï¼›ä½†æ˜¯å¯¹äºé¦–å°¾å…ƒç´ çš„å¢åˆ æ”¹æŸ¥æå¿«ï¼ˆåŒé“¾è¡¨ï¼Œä¸éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼‰ï¼Œå› æ­¤å¯ä»¥ç”¨æ¥è®¾è®¡é˜Ÿåˆ—å’Œæ ˆã€‚
**åº•å±‚åŸç†**ï¼šåº•å±‚é‡‡ç”¨åŒé“¾è¡¨å­˜å‚¨å…ƒç´ ï¼Œ



#### Set

##### è®¤è¯†å“ˆå¸Œå€¼
å°±æ˜¯ä¸€ä¸ªintç±»å‹çš„éšæœºå€¼ï¼ŒJavaæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå“ˆå¸Œå€¼ã€‚
Objectä¸­å®šä¹‰äº†HashCode()ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨ã€‚
ç‰¹ç‚¹ï¼š
- åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨ HashCode() è¿”å›å€¼æ˜¯ä¸€æ ·çš„
- ä¸åŒçš„å¯¹è±¡è°ƒç”¨ HashCode() è¿”å›å€¼ä¸€èˆ¬æ˜¯ä¸ç›¸ç­‰çš„ï¼Œç›¸ç­‰çš„æƒ…å†µè¢«å«åšå“ˆå¸Œç¢°æ’
##### HashSet

1. **å“ˆå¸Œè¡¨**
- JDK8ä¹‹å‰ï¼Œå“ˆå¸Œè¡¨= æ•°ç»„+é“¾è¡¨
- JDK8å¼€å§‹ï¼Œå“ˆå¸Œè¡¨= æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘
- å“ˆå¸Œè¡¨æ˜¯ä¸€ç§å¢åˆ æ”¹æŸ¥ï¼Œæ€§èƒ½éƒ½æ¯”è¾ƒå¥½çš„æ•°æ®ç»“æ„

2. **åº•å±‚åŸç†**
HashSet åº•å±‚åŸºäºå“ˆå¸Œè¡¨å­˜å‚¨æ•°æ®çš„ã€‚
- â‘  åˆ›å»ºä¸€ä¸ªé»˜è®¤é•¿åº¦ä¸º16çš„æ•°å­—ï¼Œé»˜è®¤åŠ è½½å› å­ä¸º0.75ï¼ˆå…ƒç´ ä¸ªæ•°=oldcapacity * 0.75 æ—¶ï¼Œæ‰©å®¹ï¼‰ï¼Œæ•°ç»„åä¸ºtable
- â‘¡ ä½¿ç”¨å…ƒç´ çš„å“ˆå¸Œå€¼å¯¹æ•°ç»„çš„é•¿åº¦åšè¿ç®—ï¼Œè®¡ç®—å‡ºåº”å­˜å…¥çš„ä½ç½®
- â‘¢ åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦ä¸ºnullï¼Œå¦‚æœæ˜¯nullï¼Œå°±ç›´æ¥å­˜å…¥
- â‘£ å¦‚æœä¸ä¸ºnullï¼Œè°ƒç”¨equalsæ¯”è¾ƒï¼Œç›¸ç­‰ï¼Œåˆ™ä¸å­˜ï¼›ä¸ç›¸ç­‰ï¼Œåˆ™å­˜å…¥æ•°ç»„ã€‚
    + JDK8ä¹‹å‰ï¼Œæ–°å…ƒç´ å­˜å…¥æ•°ç»„ï¼Œè€å…ƒç´ æŒ‚åœ¨ä¸‹é¢ï¼Œå°±æ˜¯é“¾è¡¨ã€‚
    + JDK8å¼€å§‹ï¼Œæ–°å…ƒç´ ç›´æ¥æŒ‚åœ¨è€å…ƒç´ ä¸‹é¢ï¼›å½“é“¾è¡¨é•¿åº¦>8ï¼Œä¸”æ•°ç»„é•¿åº¦>=64æ—¶ï¼Œè‡ªåŠ¨å°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ã€‚

3. **è‡ªå®šä¹‰å»é‡**
åŠ å…¥ä¸¤ä¸ªå±æ€§ä¸€æ ·çš„studentå¯¹è±¡ï¼Œå› ä¸ºå¯¹è±¡åœ°å€ä¸ä¸€æ ·ï¼Œä¸ä¼šå»é‡ã€‚è¦å»é™¤è¿™ç§å½¢å¼çš„é‡å¤å¯¹è±¡ï¼Œå°±åªèƒ½è‡ªå®šä¹‰
è¿™æ—¶å€™ï¼Œå°±éœ€è¦é‡å†™ HashCode() å’Œ equals()ã€‚è¿™é‡Œä¸æ˜ç™½çš„è¯ï¼Œå°±åœ¨çœ‹çœ‹**åº•å±‚åŸç†**
é‡å†™æ—¶åœ¨ Student ç±»é‡Œé¢é‡å†™ï¼Œideaå¯ä»¥å¿«æ·ç”Ÿæˆã€‚

##### LinkedHashSet
ä¹Ÿæ˜¯åŸºäºå“ˆå¸Œè¡¨ï¼ˆæ•°ç»„ã€é“¾è¡¨ã€çº¢é»‘æ ‘ï¼‰å®ç°çš„ï¼Œé€šè¿‡åŒé“¾è¡¨æ¥ç»´æŠ¤å…ˆåé¡ºåºã€‚

##### TreeSet
åº•å±‚åŸºäºçº¢é»‘æ ‘
> æ•°å€¼ç±»å‹é»˜è®¤æŒ‰å¤§å°å‡åºæ’åˆ—
> String ç±»å‹æŒ‰é¦–å­—ç¬¦ç¼–å·å‡åºæ’åˆ—   
**å¯¹è±¡ç±»å‹ï¼šå¦‚ Studentï¼Œæ˜¯æ— æ³•ç›´æ¥æ’åºçš„ã€‚**
å¦‚æœéè¦æ’åºï¼Œä¹Ÿå¯ä»¥ï¼›æœ‰ä¸¤ç§æ–¹æ³•
1. å¯¹è±¡ç±»å®ç°comparableæ¥å£ï¼Œé‡å†™compareToæ–¹æ³•ï¼ŒæŒ‡å®šå¤§å°æ¯”è¾ƒè§„åˆ™ã€‚
```java
// o1.compareTo(o2)
// o1 æ˜¯æ¯”è¾ƒè€…ï¼Œo2 æ˜¯è¢«æ¯”è¾ƒè€…
// å‡åºè§„å®šï¼šå¦‚æœå·¦è¾¹å¤§äºå³è¾¹ï¼Œè¯·æ”¾å›æ­£æ•´æ•°ï¼›åä¹‹ï¼Œè¯·è¿”å›è´Ÿæ•´æ•°ï¼›ç›¸ç­‰è¿”å›0
@Override
public int compareTo(Student o){
    if(this.age > o.getAge()) return 1;//ç±»é‡Œé¢å¯ä»¥ç›´æ¥ç”¨ this è°ƒç”¨ 
    if(this.age < o.getAge()) return -1;
    return 0;//TreeSetä¸­ï¼Œç›¸ç­‰åªä¼šä¿ç•™ä¸€ä¸ªï¼›å¦‚æœä¸€å®šè¦ä¿ç•™ï¼Œè¿™ä¸è¦ 0 çš„æƒ…å†µï¼Œé‡æ–°è‡ªå®šä¹‰
}
```
2. ä½¿ç”¨é›†åˆè‡ªå¸¦æ¯”è¾ƒå™¨ Comparatorï¼ŒæŒ‡å®šæ¯”è¾ƒè§„åˆ™ï¼š`public TreeSet(Comparator c)`
```java
Set<Student> stu = new TreeSet(new Comparator<Student>(){
    @Override
    public int compare(Student o1,Student o2){
        return o1.getAge()-o2.getAge();//å¦‚æœæ˜¯å°æ•°çš„è¯ï¼Œå°½é‡è°ƒç”¨ Double.Compare(o1.getxx-o2.getxxx)
    }
});
```




#### Map
å­˜å‚¨ Key-Value é”®å€¼å¯¹æ•°æ®ï¼Œæ ¼å¼ä¸º{key1=val1,key2=val2,â€¦â€¦}ï¼ŒKey ä¸å…è®¸é‡å¤ï¼ˆé‡å¤åˆ™è¦†ç›–ï¼‰ï¼ŒValue å¯ä»¥é‡å¤ã€‚å…è®¸è‡³å¤šä¸€ä¸ª null é”® å’Œå¤šä¸ª null å€¼ã€‚
##### HashMap
![HashMap](https://www.runoob.com/wp-content/uploads/2020/07/WV9wXLl.png)
å¸¸ç”¨æ–¹æ³•ï¼š
```java
HashMap<String,Integer> map = new HashMap();
// put get size clear isEmpty
Set<String> keys = map.keySet();//Set é›†åˆçš„ç‰¹ç‚¹ä¸keyçš„ç‰¹ç‚¹ä¸€è‡´ï¼Œå› æ­¤ç”¨Seté›†åˆæ¥æ”¶ã€‚
Collection<Integer> values =map.values();
```

HashMap åº•å±‚å’ŒHashSet ä¸€æ ·ï¼ŒHashSet åº•å±‚è°ƒç”¨çš„ HashMap

##### LinkedHashMap
LinkedHashMapæ˜¯LinkedHashsetçš„åº•å±‚åŸç†ï¼Œåº•å±‚ç›´æ¥ new LinkedHashMap

##### TreeMap
ä» Java 7 å¼€å§‹ï¼ŒTreeMap ä¸å…è®¸ä½¿ç”¨ null ä½œä¸ºé”®
åº•å±‚å°±æ˜¯TreeSetçš„åº•å±‚ï¼ŒTreeSet åº•å±‚å°±æ˜¯ new TreeMap


### æ³›å‹
å®šä¹‰ï¼šå®šä¹‰ç±»ã€æ¥å£ã€æ–¹æ³•æ—¶ï¼ŒåŒæ—¶å£°æ˜ä¸€ä¸ªæˆ–è€…å¤šä¸ªç±»å‹çš„å˜é‡
æ ¼å¼ï¼š`public <T> void printArray(T[] arr){...}` æˆ–è€… `public class ArrayList<T>{....}`ï¼Œåœ¨ "<>" ä¸­å£°æ˜ç±»å‹ã€‚
ä½œç”¨ï¼šåœ¨ç¼–è¯‘é˜¶æ®µçº¦æŸæ‰€èƒ½æ“ä½œçš„æ•°æ®ç±»å‹ï¼Œé¿å…å¼ºåˆ¶è½¬æ¢å‡ºé”™ã€‚

> åƒ `public <T> void printArray(T[] arr){...}` å®šä¹‰æ—¶æ‹¥æœ‰è¿”å›å€¼ï¼Œvoid å°±æ”¹ä¸º Tã€‚
**æ³›å‹ç±»å‹å‚æ•°çº¦å®šï¼š**

| ç±»å‹å‚æ•°     | å«ä¹‰            | å¸¸ç”¨åœºæ™¯                        |
|----------|---------------|-----------------------------|
| `E`      | Element (å…ƒç´ )  | åœ¨é›†åˆä¸­ä½¿ç”¨ï¼Œå› ä¸ºé›†åˆä¸­å­˜æ”¾çš„æ˜¯å…ƒç´           |
| `T`      | Type (ç±»å‹)     | è¡¨ç¤ºä¸€ä¸ªJavaç±»                   |
| `K`      | Key (é”®)       | åœ¨æ˜ å°„ä¸­è¡¨ç¤ºé”®çš„ç±»å‹                  |
| `V`      | Value (å€¼)     | åœ¨æ˜ å°„ä¸­è¡¨ç¤ºå€¼çš„ç±»å‹                  |
| `N`      | Number (æ•°å€¼ç±»å‹) | è¡¨ç¤ºæ•°å€¼ç±»å‹                      |
| `?`      | é€šé…ç¬¦           | **ä½¿ç”¨æ³›å‹æ—¶**ï¼ˆä¸æ˜¯å®šä¹‰ï¼‰ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„Javaç±»å‹ |
| `R`      | Result (ç»“æœ)   | è¡¨ç¤ºæ–¹æ³•è¿”å›å€¼çš„ç±»å‹                  |
| `U`, `S` | å…¶ä»–ç±»å‹          | å½“éœ€è¦å¤šä¸ªç±»å‹å‚æ•°æ—¶ä½¿ç”¨                |

**ä¸Šä¸‹é™ï¼š**
- æ³›å‹ä¸Šé™ï¼š? extends Carï¼Œ? å¿…é¡»æ¥æ”¶ Car æˆ–è€…å…¶å­ç±»
- æ³›å‹ä¸‹é™ï¼š? super Carï¼Œ? å¿…é¡»æ¥æ”¶Car æˆ–è€…å…¶çˆ¶ç±»

**æ”¯æŒçš„ç±»å‹ï¼š**
ä¸æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåªæ”¯æŒå¯¹è±¡ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹ï¼‰

### åºåˆ—åŒ–
æ˜¯å°†å¯¹è±¡è½¬ä¸ºå­—èŠ‚æµï¼Œååºåˆ—åŒ–æ˜¯å°†å­—èŠ‚æµé‡æ–°è½¬ä¸ºå¯¹è±¡ã€‚
è¦å®ç°åºåˆ—åŒ–ï¼Œåªéœ€è¦ç±»å®ç° Serializable æ¥å£å³å¯ã€‚
### ç½‘ç»œç¼–ç¨‹
åŸºæœ¬çš„é€šä¿¡æ¶æ„æœ‰2ç§å½¢å¼:CSæ¶æ„(Clientå®¢æˆ·ç«¯/ServeræœåŠ¡ç«¯)ã€BSæ¶æ„(Browseræµè§ˆå™¨/ServeræœåŠ¡ç«¯)ã€‚
#### ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ 
1. IP
- è®¾å¤‡åœ¨ç½‘ç»œä¸­çš„åœ°å€ï¼Œæ˜¯è®¾å¤‡åœ¨ç½‘ç»œä¸­çš„å”¯ä¸€æ ‡è¯†ï¼›Javaä¸­InetAdressç±»è¡¨ç¤ºIPå¯¹è±¡
| InetAdressç±»å¸¸ç”¨æ–¹æ³• | è¯´æ˜ |
| :--- | :--- |
| `public static InetAddress getLocalHost() throws UnknownHostException` | è·å–æœ¬æœºIPï¼Œè¿”å›ä¸€ä¸ªInetAddresså¯¹è±¡ |
| `public String getHostName()` | è·å–è¯¥IPåœ°å€å¯¹è±¡å¯¹åº”çš„ä¸»æœºåï¼ˆå‚æ•°å¯ä»¥æ˜¯åŸŸåï¼‰ |
| `public String getHostAddress()` | è·å–è¯¥IPåœ°å€å¯¹è±¡ä¸­çš„IPåœ°å€ä¿¡æ¯ |
| `public static InetAddress getByName(String host) throws UnknownHostException` | æ ¹æ®IPåœ°å€æˆ–è€…åŸŸåï¼Œè¿”å›ä¸€ä¸ªInetAddresså¯¹è±¡ |
| `public boolean isReachable(int timeout) throws IOException` | åˆ¤æ–­ä¸»æœºåœ¨æŒ‡å®šæ¯«ç§’å†…ä¸è¯¥IPå¯¹åº”çš„ä¸»æœºæ˜¯å¦èƒ½è¿é€š |

2. ç«¯å£
- åº”ç”¨ç¨‹åºåœ¨è®¾å¤‡ä¸­çš„å”¯ä¸€æ ‡è¯†

3. åè®®
- è¿æ¥å’Œæ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“çš„è§„åˆ™ã€‚
#### ä¼ è¾“å±‚ä¸¤ä¸ªä¼ è¾“åè®®
1. UDPï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®
- ä¸€èˆ¬æ•°æ®æŠ¥å¤§å°é™åˆ¶åœ¨64kbä»¥å†…
- æ— è¿æ¥ï¼Œä¸å¯é åè®®
```java
//Javaæä¾›äº†ä¸€ä¸ªjava.net.DatagramSocketç±»æ¥å®ç°UDPé€šä¿¡:
//=============client===========
DatagramSocket socket = new DatagramSocket();//ç³»ç»Ÿéšæœºåˆ†é…ç«¯å£
bytep[] bytes = "å†…å®¹".getBytes();
DatagramPacket packet = new DatagramPacket(bytes,bytes.length,InetAdress.getLocalHost(),8080);//æ•°æ®åŒ…å‚æ•°:å†…å®¹ï¼Œå†…å®¹é•¿åº¦ï¼Œç›®çš„åœ°å€ï¼Œç›®çš„ç«¯å£
socket.send(packet);//å‘é€æ•°æ®åŒ…

//===============server============
DatagramSocket socket = new DatagramSocket(8080);//ç«¯å£8080
byte[] buf = new byte[1024 * 64];
DatagramPacket packet = new DatagramPacket(buf,buf.length);
socket.receive(packet);//æ¥æ”¶æ•°æ®
//æŸ¥çœ‹æ¥æ”¶æ•°æ®
int len = packet.getLength();//æ”¶åˆ°æ•°æ®çš„é•¿åº¦
String data = new String(buf,0,len);
```

2. TCPï¼šä¼ è¾“æ§åˆ¶åè®®
- åœ¨ä¸å¯é çš„ä¿¡é“ä¸Šï¼Œå®ç°å¯é çš„æ•°æ®ä¼ é€ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹  ï¼‰ã€‚
- é¢å‘è¿æ¥ï¼Œå¯é é€šä¿¡
```java
//Javaæä¾›äº†ä¸€ä¸ªjava.net.Socketç±»æ¥å®ç°TCPå®¢æˆ·ç«¯é€šä¿¡:
//=============client==========
Socket client = new Socket("127.0.0.1",8080);
OutputStream os = client.getOutputStream();//å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä½¿ç”¨çš„æµå¿…é¡»ä¸€æ ·ã€‚
DataOutputStream dos = new DataOutputStream(os);
dos.writeInt(1);
dos.writeUTF("xåœ°æ–¹");
client.close();

//æœåŠ¡ç«¯æ˜¯é€šè¿‡java.netåŒ…ä¸‹çš„Serversocketç±»æ¥å®ç°çš„æœåŠ¡çš„é€šä¿¡ï¼š
//============server========
ServerSokcet server = new ServerSocket(8080);
Socket socket = server.accpet();//é˜»å¡ç­‰å¾…è¿æ¥
InputStream in = socket.getInputStream()
DataInputStream dis = new DataInputStream(in);
int id = dis.readInt();
String msg = dis.readUTF();
```

> tcpå’Œudpçš„å¤šå‘å¤šæ”¶ï¼ŒåŠ ä¸Šwhileå³å¯
> Socket é•¿è¿æ¥ï¼ŒæŒ‡çš„æ˜¯åœ¨å®¢æˆ·å’ŒæœåŠ¡ç«¯ä¹‹é—´ä¿æŒä¸€ä¸ª socket è¿æ¥é•¿æ—¶é—´ä¸æ–­å¼€:`socket.setKeepAlive(true);`

#### B/Sæ¶æ„åŸç†
è®¿é—®æµè§ˆå™¨ 127.0.0.1:8080 å°±å¯ä»¥çœ‹åˆ° hello worldã€‚
```java
ServerSokcet server = new ServerSocket(8080);
Socket socket = server.accpet();
OutputStream os = socket.getOutputStream();
PrintStream ps = new PrintStream(s);
ps.println("HTTP/1.1 200 OK");
ps.println("Content-Type:text/html;charset=utf-8")
ps.println();//å¿…é¡»æ¢ä¸€è¡Œ
ps.println("<html>")
ps.println("<head>")
ps.println("<meta charset='utf-8'>");
ps.println("<title>");
ps.println("é»‘é©¬Javaç£Šå“¥çš„è§†é¢‘");
ps.println("</title>");
ps.println("</head>");
ps.println("<body>"):
ps.println("<h1 style='color:red;font-size=20px'>hello world</h1>")ps.println("</body>");
ps.println("</html>");
ps.close();
socket.close();
```
### å‘é€é‚®ä»¶
é‡åˆ°å†è¡¥å……


### å¤šçº¿ç¨‹ç¼–ç¨‹
çº¿ç¨‹ï¼šç¨‹åºå†…ä¸€æ¡æ‰§è¡Œæµç¨‹ã€‚
è¿›ç¨‹ï¼šæ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼ˆè½¯ä»¶ï¼‰å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚

**è¿›ç¨‹ä¸­ï¼Œå¤šä¸ªçº¿ç¨‹æ˜¯å¹¶å‘å’Œå¹¶è¡Œæ‰§è¡Œçš„ã€‚**

å¹¶å‘ï¼šcpuè½®è¯¢æ‰§è¡Œæ¯ä¸ªçº¿ç¨‹ï¼Œç”±äºåˆ‡æ¢é€Ÿåº¦å¾ˆå¿«ï¼Œçœ‹èµ·æ¥åƒæ˜¯åŒæ—¶æ‰§è¡Œã€‚
å¹¶è¡Œï¼šåœ¨æŸä¸€æ—¶åˆ»ä¸Šï¼ŒåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹åœ¨cpuè°ƒåº¦ã€‚
#### Thread
```java
public class ThreadDemo {

    public static void main(String[] args) {
        // å®ä¾‹åŒ–å¯¹è±¡
        MyThread tA = new MyThread("Thread çº¿ç¨‹-A");
        MyThread tB = new MyThread("Thread çº¿ç¨‹-B");
        // è°ƒç”¨çº¿ç¨‹ä¸»ä½“
        tA.start();
        tB.start();
    }

    static class MyThread extends Thread {
        private int ticket = 5;

        MyThread(String name) {
            super(name);
        }
        @Override
        public void run() {
            while (ticket > 0) {
                System.out.println(Thread.currentThread().getName() + " å–å‡ºäº†ç¬¬ " + ticket + " å¼ ç¥¨");
                ticket--;
            }
        }

    }

}
```
#### Runable
**å®ç° Runnable æ¥å£ä¼˜äºç»§æ‰¿ Thread ç±»**ï¼Œå› ä¸ºJavaä¸èƒ½å¤šç»§æ‰¿
```java
public class RunnableDemo {

    public static void main(String[] args) {
        // å®ä¾‹åŒ–å¯¹è±¡
        Thread tA = new Thread(new MyThread(), "Runnable çº¿ç¨‹-A");
        Thread tB = new Thread(new MyThread(), "Runnable çº¿ç¨‹-B");
        // è°ƒç”¨çº¿ç¨‹ä¸»ä½“
        tA.start();
        tB.start();
    }

    static class MyThread implements Runnable {

        private int ticket = 5;

        @Override
        public void run() {
            while (ticket > 0) {
                System.out.println(Thread.currentThread().getName() + " å–å‡ºäº†ç¬¬ " + ticket + " å¼ ç¥¨");
                ticket--;
            }
        }

    }

}
```
> runable å¯ä»¥ç”¨åŒ¿åå†…éƒ¨ç±»ï¼Œç›´æ¥ç®€å†™ã€‚

#### Callableã€Futureã€FutureTask
**ç»§æ‰¿ Thread ç±»å’Œå®ç° Runnable æ¥å£è¿™ä¸¤ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼éƒ½æ²¡æœ‰è¿”å›å€¼**ï¼Œä¸ºäº†å¾—åˆ°ç»“æœï¼ŒJava 1.5 åï¼Œæä¾›äº† Callable æ¥å£å’Œ Future æ¥å£ï¼Œé€šè¿‡å®ƒä»¬ï¼Œå¯ä»¥åœ¨çº¿ç¨‹æ‰§è¡Œç»“æŸåï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚

**Callable + Future + FutureTask ç¤ºä¾‹**
é€šè¿‡å®ç° Callable æ¥å£åˆ›å»ºçº¿ç¨‹çš„æ­¥éª¤ï¼š

1. åˆ›å»º Callable æ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç° call æ–¹æ³•ã€‚è¯¥ call æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚
2. åˆ›å»º Callable å®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨ FutureTask ç±»æ¥åŒ…è£… Callable å¯¹è±¡ï¼Œè¯¥ FutureTask å¯¹è±¡å°è£…äº†è¯¥ Callable å¯¹è±¡çš„ call æ–¹æ³•çš„è¿”å›å€¼ã€‚
3. ä½¿ç”¨ FutureTask å¯¹è±¡ä½œä¸º Thread å¯¹è±¡çš„ target åˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚
4. è°ƒç”¨ FutureTask å¯¹è±¡çš„ get æ–¹æ³•æ¥è·å¾—çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚
```java
public class CallableDemo {

    public static void main(String[] args) {
        Callable<Long> callable = new MyThread();
        FutureTask<Long> future = new FutureTask<>(callable);
        new Thread(future, "Callable çº¿ç¨‹").start();
        try {
            System.out.println("ä»»åŠ¡è€—æ—¶ï¼š" + (future.get() / 1000000) + "æ¯«ç§’");
        } catch (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }
    }

    static class MyThread implements Callable<Long> {

        private int ticket = 10000;

        @Override
        public Long call() {
            long begin = System.nanoTime();
            while (ticket > 0) {
                System.out.println(Thread.currentThread().getName() + " å–å‡ºäº†ç¬¬ " + ticket + " å¼ ç¥¨");
                ticket--;
            }

            long end = System.nanoTime();
            return (end - begin);
        }

    }

}
```
**Callable**
Callable æ¥å£åªå£°æ˜äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å«åš call()ï¼š

```java
public interface Callable<V> {
    /**
     * Computes a result, or throws an exception if unable to do so.
     *
     * @return computed result
     * @throws Exception if unable to compute a result
     */
    V call() throws Exception;
}
```
é‚£ä¹ˆæ€ä¹ˆä½¿ç”¨ Callable å‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹æ˜¯é…åˆ ExecutorService æ¥ä½¿ç”¨çš„ï¼Œåœ¨ ExecutorService æ¥å£ä¸­å£°æ˜äº†è‹¥å¹²ä¸ª submit æ–¹æ³•çš„é‡è½½ç‰ˆæœ¬ï¼š

```java
<T> Future<T> submit(Callable<T> task);
<T> Future<T> submit(Runnable task, T result);
Future<?> submit(Runnable task);
```
ç¬¬ä¸€ä¸ª submit æ–¹æ³•é‡Œé¢çš„å‚æ•°ç±»å‹å°±æ˜¯ Callableã€‚

**Future**
Future å°±æ˜¯å¯¹äºå…·ä½“çš„ Callable ä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿›è¡Œå–æ¶ˆã€æŸ¥è¯¢æ˜¯å¦å®Œæˆã€è·å–ç»“æœã€‚å¿…è¦æ—¶å¯ä»¥é€šè¿‡ get æ–¹æ³•è·å–æ‰§è¡Œç»“æœï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡ç›´åˆ°ä»»åŠ¡è¿”å›ç»“æœã€‚

```java
public interface Future<V> {
    boolean cancel(boolean mayInterruptIfRunning);
    boolean isCancelled();
    boolean isDone();
    V get() throws InterruptedException, ExecutionException;
    V get(long timeout, TimeUnit unit)
        throws InterruptedException, ExecutionException, TimeoutException;
}
```
**FutureTask**
FutureTask ç±»å®ç°äº† RunnableFuture æ¥å£ï¼ŒRunnableFuture ç»§æ‰¿äº† Runnable æ¥å£å’Œ Future æ¥å£ã€‚

æ‰€ä»¥ï¼ŒFutureTask æ—¢å¯ä»¥ä½œä¸º Runnable è¢«çº¿ç¨‹æ‰§è¡Œï¼Œåˆå¯ä»¥ä½œä¸º Future å¾—åˆ° Callable çš„è¿”å›å€¼ã€‚

```java
public class FutureTask<V> implements RunnableFuture<V> {
    // ...
    public FutureTask(Callable<V> callable) {}
    public FutureTask(Runnable runnable, V result) {}
}

public interface RunnableFuture<V> extends Runnable, Future<V> {
    void run();
}
```
äº‹å®ä¸Šï¼ŒFutureTask æ˜¯ Future æ¥å£çš„ä¸€ä¸ªå”¯ä¸€å®ç°ç±»
#### çº¿ç¨‹çš„å¸¸ç”¨æ–¹æ³•

çº¿ç¨‹ï¼ˆ`Thread`ï¼‰åŸºæœ¬æ–¹æ³•æ¸…å•ï¼š

| æ–¹æ³•              | æè¿°                                                                                                                    |
|-----------------|-----------------------------------------------------------------------------------------------------------------------|
| `run`           | çº¿ç¨‹çš„æ‰§è¡Œå®ä½“ã€‚                                                                                                              |
| `start`         | çº¿ç¨‹çš„å¯åŠ¨æ–¹æ³•ã€‚                                                                                                              |
| `currentThread` | è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨ã€‚                                                                                                    |
| `setName`       | è®¾ç½®çº¿ç¨‹åç§°ã€‚                                                                                                               |
| `getName`       | è·å–çº¿ç¨‹åç§°ã€‚                                                                                                               |
| `setPriority`   | è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ã€‚Java ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ [1,10]ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šå…·æœ‰ä¼˜å…ˆæƒã€‚å¯ä»¥é€šè¿‡ `thread.setPriority(Thread.MAX_PRIORITY)` çš„æ–¹å¼è®¾ç½®ï¼Œé»˜è®¤ä¼˜å…ˆçº§ä¸º 5ã€‚ |
| `getPriority`   | è·å–çº¿ç¨‹ä¼˜å…ˆçº§ã€‚                                                                                                              |
| `setDaemon`     | è®¾ç½®çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚å®ˆæŠ¤çº¿ç¨‹æ˜¯åœ¨åå°æ‰§è¡Œå¹¶ä¸”ä¸ä¼šé˜»æ­¢ JVM ç»ˆæ­¢çš„çº¿ç¨‹ï¼Œå½“æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹ç»“æŸæ—¶ï¼Œç¨‹åºä¹Ÿå°±ç»ˆæ­¢ï¼ŒåŒæ—¶ä¼šæ€æ­»æ‰€æœ‰å®ˆæŠ¤çº¿ç¨‹ã€‚                                                  |
| `isDaemon`      | åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚                                                                                                          |
| `isAlive`       | åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¯åŠ¨ã€‚                                                                                                             |
| `interrupt`     | ä¸­æ–­å¦ä¸€ä¸ªçº¿ç¨‹çš„è¿è¡ŒçŠ¶,æ‰“æ–­ sleepï¼Œwaitï¼Œjoin çš„çº¿ç¨‹ ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä¼šæ¸…ç©ºæ‰“æ–­çŠ¶                                                                                                         |
| `interrupted`   | æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²è¢«ä¸­æ–­ã€‚é€šè¿‡æ­¤æ–¹æ³•å¯ä»¥æ¸…é™¤çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœè¦è¿ç»­è°ƒç”¨æ­¤æ–¹æ³•ä¸¤æ¬¡ï¼Œåˆ™ç¬¬äºŒæ¬¡è°ƒç”¨å°†è¿”å› falseï¼ˆé™¤éå½“å‰çº¿ç¨‹åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ¸…é™¤å…¶ä¸­æ–­çŠ¶æ€ä¹‹åä¸”åœ¨ç¬¬äºŒæ¬¡è°ƒç”¨æ£€æŸ¥å…¶çŠ¶æ€ä¹‹å‰å†æ¬¡ä¸­æ–­ï¼‰ã€‚             |
| `join`          | å¯ä»¥ä½¿ä¸€ä¸ªçº¿ç¨‹å¼ºåˆ¶è¿è¡Œï¼Œçº¿ç¨‹å¼ºåˆ¶è¿è¡ŒæœŸé—´ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è¿è¡Œï¼Œå¿…é¡»ç­‰å¾…æ­¤çº¿ç¨‹å®Œæˆä¹‹åæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚                                                                     |
| `Thread.sleep`  | é™æ€æ–¹æ³•ã€‚å°†å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ã€‚                                                                                                    |
| `Thread.yield`  | é™æ€æ–¹æ³•ã€‚å°†å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœï¼Œè®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œã€‚                                                                                            |

**sleep**
1. è°ƒç”¨ sleep ä¼šè®©å½“å‰çº¿ç¨‹ä» Running è¿›å…¥ Timed Waiting çŠ¶æ€ï¼ˆé˜»å¡ï¼‰
2. å…¶å®ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨ interrupt æ–¹æ³•æ‰“æ–­æ­£åœ¨ç¡çœ çš„çº¿ç¨‹ï¼Œè¿™æ—¶ sleep æ–¹æ³•ä¼šæŠ›å‡º InterruptedException 
3. ç¡çœ ç»“æŸåçš„çº¿ç¨‹æœªå¿…ä¼šç«‹åˆ»å¾—åˆ°æ‰§è¡Œ
4. å»ºè®®ç”¨ TimeUnit çš„ sleep ä»£æ›¿ Thread çš„ sleep æ¥è·å¾—æ›´å¥½çš„å¯è¯»æ€§

**yield**
1. è°ƒç”¨ yield ä¼šè®©å½“å‰çº¿ç¨‹ä» Running è¿›å…¥ Runnable å°±ç»ªçŠ¶æ€ï¼Œç„¶åè°ƒåº¦æ‰§è¡Œå…¶å®ƒçº¿ç¨‹
2. å…·ä½“çš„å®ç°ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦å™¨
#### åŒæ­¥ä»£ç å—
1. synchronizd
- åŒæ­¥å®ä¾‹æ–¹æ³• - å¯¹äºæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡
- åŒæ­¥é™æ€æ–¹æ³• - å¯¹äºé™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„ Class å¯¹è±¡
- åŒæ­¥ä»£ç å— - å¯¹äºåŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯ synchonized æ‹¬å·é‡Œé…ç½®çš„å¯¹è±¡
#### çº¿ç¨‹é€šä¿¡

> å½“å¤šä¸ªçº¿ç¨‹å¯ä»¥ä¸€èµ·å·¥ä½œå»è§£å†³æŸä¸ªé—®é¢˜æ—¶ï¼Œå¦‚æœæŸäº›éƒ¨åˆ†å¿…é¡»åœ¨å…¶å®ƒéƒ¨åˆ†ä¹‹å‰å®Œæˆï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œåè°ƒã€‚

##### wait/notify/notifyAll

- `wait` - `wait` ä¼šè‡ªåŠ¨é‡Šæ”¾å½“å‰çº¿ç¨‹å æœ‰çš„å¯¹è±¡é”ï¼Œ**è®©çº¿ç¨‹ä» `Running` çŠ¶æ€è½¬å…¥ `Waiting` çŠ¶æ€**ï¼Œç­‰å¾… `notify` / `notifyAll` æ¥å”¤é†’ã€‚
- `notify` - å”¤é†’ä¸€ä¸ªæ­£åœ¨ `Waiting` çŠ¶æ€çš„çº¿ç¨‹ï¼Œå¹¶è®©å®ƒæ‹¿åˆ°å¯¹è±¡é”ï¼Œå…·ä½“å”¤é†’å“ªä¸€ä¸ªçº¿ç¨‹ç”± JVM æ§åˆ¶ ã€‚
- `notifyAll` - å”¤é†’æ‰€æœ‰æ­£åœ¨ `Waiting` çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ¥ä¸‹æ¥å®ƒä»¬éœ€è¦ç«äº‰å¯¹è±¡é”ã€‚

> æ³¨æ„ï¼š
>
> - **`wait`ã€`notify`ã€`notifyAll` éƒ½æ˜¯ `Object` ç±»ä¸­çš„æ–¹æ³•**ï¼Œè€Œé `Thread`ã€‚
> - **`wait`ã€`notify`ã€`notifyAll` åªèƒ½ç”¨åœ¨ `synchronized` æ–¹æ³•æˆ–è€… `synchronized` ä»£ç å—ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡º `IllegalMonitorStateException`**ã€‚

ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…æ¨¡å¼æ˜¯ `wait`ã€`notify`ã€`notifyAll` çš„ä¸€ä¸ªç»å…¸ä½¿ç”¨æ¡ˆä¾‹ï¼š

```java
public class ThreadWaitNotifyDemo02 {

    private static final int QUEUE_SIZE = 10;
    private static final PriorityQueue<Integer> queue = new PriorityQueue<>(QUEUE_SIZE);

    public static void main(String[] args) {
        new Producer("ç”Ÿäº§è€…A").start();
        new Producer("ç”Ÿäº§è€…B").start();
        new Consumer("æ¶ˆè´¹è€…A").start();
        new Consumer("æ¶ˆè´¹è€…B").start();
    }

    static class Consumer extends Thread {

        Consumer(String name) {
            super(name);
        }

        @Override
        public void run() {
            while (true) {
                synchronized (queue) {
                    while (queue.size() == 0) {
                        try {
                            System.out.println("é˜Ÿåˆ—ç©ºï¼Œç­‰å¾…æ•°æ®");
                            queue.wait();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                            queue.notifyAll();
                        }
                    }
                    queue.poll(); // æ¯æ¬¡ç§»èµ°é˜Ÿé¦–å…ƒç´ 
                    queue.notifyAll();
                    try {
                        Thread.sleep(500);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    System.out.println(Thread.currentThread().getName() + " ä»é˜Ÿåˆ—å–èµ°ä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—å½“å‰æœ‰ï¼š" + queue.size() + "ä¸ªå…ƒç´ ");
                }
            }
        }
    }

    static class Producer extends Thread {

        Producer(String name) {
            super(name);
        }

        @Override
        public void run() {
            while (true) {
                synchronized (queue) {
                    while (queue.size() == QUEUE_SIZE) {
                        try {
                            System.out.println("é˜Ÿåˆ—æ»¡ï¼Œç­‰å¾…æœ‰ç©ºä½™ç©ºé—´");
                            queue.wait();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                            queue.notifyAll();
                        }
                    }
                    queue.offer(1); // æ¯æ¬¡æ’å…¥ä¸€ä¸ªå…ƒç´ 
                    queue.notifyAll();
                    try {
                        Thread.sleep(500);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    System.out.println(Thread.currentThread().getName() + " å‘é˜Ÿåˆ—å–ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—å½“å‰æœ‰ï¼š" + queue.size() + "ä¸ªå…ƒç´ ");
                }
            }
        }
    }
}
```

##### join

åœ¨çº¿ç¨‹æ“ä½œä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `join` æ–¹æ³•è®©ä¸€ä¸ªçº¿ç¨‹å¼ºåˆ¶è¿è¡Œï¼Œçº¿ç¨‹å¼ºåˆ¶è¿è¡ŒæœŸé—´ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è¿è¡Œï¼Œå¿…é¡»ç­‰å¾…æ­¤çº¿ç¨‹å®Œæˆä¹‹åæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚

```java
public class ThreadJoinDemo {

    public static void main(String[] args) {
        MyThread mt = new MyThread(); // å®ä¾‹åŒ–Runnableå­ç±»å¯¹è±¡
        Thread t = new Thread(mt, "mythread"); // å®ä¾‹åŒ–Threadå¯¹è±¡
        t.start(); // å¯åŠ¨çº¿ç¨‹
        for (int i = 0; i < 50; i++) {
            if (i > 10) {
                try {
                    t.join(); // çº¿ç¨‹å¼ºåˆ¶è¿è¡Œ
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            System.out.println("Main çº¿ç¨‹è¿è¡Œ --> " + i);
        }
    }

    static class MyThread implements Runnable {

        @Override
        public void run() {
            for (int i = 0; i < 50; i++) {
                System.out.println(Thread.currentThread().getName() + " è¿è¡Œï¼Œi = " + i); // å–å¾—å½“å‰çº¿ç¨‹çš„åå­—
            }
        }
    }
}
```

#### çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ

![img](img/20210102103928.png)

`java.lang.Thread.State` ä¸­å®šä¹‰äº† **6** ç§ä¸åŒçš„çº¿ç¨‹çŠ¶æ€ï¼Œåœ¨ç»™å®šçš„ä¸€ä¸ªæ—¶åˆ»ï¼Œçº¿ç¨‹åªèƒ½å¤„äºå…¶ä¸­çš„ä¸€ä¸ªçŠ¶æ€ã€‚

ä»¥ä¸‹æ˜¯å„çŠ¶æ€çš„è¯´æ˜ï¼Œä»¥åŠçŠ¶æ€é—´çš„è”ç³»ï¼š

- **æ–°å»ºï¼ˆNewï¼‰** - å°šæœªè°ƒç”¨ `start` æ–¹æ³•çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚æ­¤çŠ¶æ€æ„å‘³ç€ï¼š**åˆ›å»ºçš„çº¿ç¨‹å°šæœªå¯åŠ¨**ã€‚

- **å°±ç»ªï¼ˆRunnableï¼‰** - å·²ç»è°ƒç”¨äº† `start` æ–¹æ³•çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚æ­¤çŠ¶æ€æ„å‘³ç€ï¼š**çº¿ç¨‹å·²ç»åœ¨ JVM ä¸­è¿è¡Œ**ã€‚
- **é˜»å¡ï¼ˆBlockedï¼‰** - æ­¤çŠ¶æ€æ„å‘³ç€ï¼š**çº¿ç¨‹å¤„äºè¢«é˜»å¡çŠ¶æ€**ã€‚

- **ç­‰å¾…ï¼ˆWaitingï¼‰** - æ­¤çŠ¶æ€æ„å‘³ç€ï¼š**çº¿ç¨‹æ— é™æœŸç­‰å¾…ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹æ˜¾å¼åœ°å”¤é†’**ã€‚ é˜»å¡å’Œç­‰å¾…çš„åŒºåˆ«åœ¨äºï¼Œé˜»å¡æ˜¯è¢«åŠ¨çš„ï¼Œå®ƒæ˜¯åœ¨ç­‰å¾…è·å– `synchronized` çš„éšå¼é”ã€‚è€Œç­‰å¾…æ˜¯ä¸»åŠ¨çš„ï¼Œé€šè¿‡è°ƒç”¨ `Object.wait` ç­‰æ–¹æ³•è¿›å…¥ã€‚

  | è¿›å…¥æ–¹æ³•                                                       | é€€å‡ºæ–¹æ³•                             |
  | -------------------------------------------------------------- | ------------------------------------ |
  |  `Object.wait` æ–¹æ³•                     | `Object.notify` / `Object.notifyAll` |
  |  `Thread.join` æ–¹æ³•                     | è¢«è°ƒç”¨çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•                 |
  | `LockSupport.park` æ–¹æ³•ï¼ˆJava å¹¶å‘åŒ…ä¸­çš„é”ï¼Œéƒ½æ˜¯åŸºäºå®ƒå®ç°çš„ï¼‰ | `LockSupport.unpark`                 |

- **å®šæ—¶ç­‰å¾…ï¼ˆTimed waitingï¼‰** - æ­¤çŠ¶æ€æ„å‘³ç€ï¼š**æ— éœ€ç­‰å¾…å…¶å®ƒçº¿ç¨‹æ˜¾å¼åœ°å”¤é†’ï¼Œåœ¨ä¸€å®šæ—¶é—´ä¹‹åä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨å”¤é†’**ã€‚

  | è¿›å…¥æ–¹æ³•                                                                       | é€€å‡ºæ–¹æ³•                                        |
  | ------------------------------------------------------------------------------ | ----------------------------------------------- |
  | `Thread.sleep` æ–¹æ³•                                                            | æ—¶é—´ç»“æŸ                                        |
  | è·å¾— `synchronized` éšå¼é”çš„çº¿ç¨‹ï¼Œè°ƒç”¨è®¾ç½®äº† Timeout å‚æ•°çš„ `Object.wait` æ–¹æ³• | æ—¶é—´ç»“æŸ / `Object.notify` / `Object.notifyAll` |
  | è®¾ç½®äº† Timeout å‚æ•°çš„ `Thread.join` æ–¹æ³•                                       | æ—¶é—´ç»“æŸ / è¢«è°ƒç”¨çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•                 |
  | `LockSupport.parkNanos` æ–¹æ³•                                                   | `LockSupport.unpark`                            |
  | `LockSupport.parkUntil` æ–¹æ³•                                                   | `LockSupport.unpark`                            |

- **ç»ˆæ­¢(Terminated)** - çº¿ç¨‹æ‰§è¡Œå®Œ `run` æ–¹æ³•ï¼Œæˆ–è€…å› å¼‚å¸¸é€€å‡ºäº† `run` æ–¹æ³•ã€‚æ­¤çŠ¶æ€æ„å‘³ç€ï¼šçº¿ç¨‹ç»“æŸäº†ç”Ÿå‘½å‘¨æœŸã€‚

#### é”
1. Lock
    - Locké”æ˜¯IDK5å¼€å§‹æä¾›çš„ä¸€ä¸ªæ–°çš„é”å®šæ“ä½œï¼Œé€šè¿‡å®ƒå¯ä»¥åˆ›å»ºå‡ºé”å¯¹è±¡è¿›è¡ŒåŠ é”å’Œè§£é”ï¼Œæ›´çµæ´»ã€æ›´æ–¹ä¾¿ã€æ›´å¼ºå¤§ã€‚
    - Lockæ˜¯æ¥å£ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œå¯ä»¥é‡‡ç”¨å®ƒçš„å®ç°ç±»ReentrantLockæ¥æ„å»ºLocké”å¯¹è±¡ã€‚å¸¸ç”¨çš„å°±æ˜¯`lock();unlock()`æ–¹æ³•

#### çº¿ç¨‹æ± 
ç›®æ ‡ï¼šæ˜¯ç”¨äºé‡å¤è¿ç”¨çº¿ç¨‹
##### ExecutorService
ä½¿ç”¨ExecutorServiceçš„å®ç°ç±»ThreadPoolExecutorï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡
```java
// å…¶æœ€å®Œæ•´çš„æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š
public ThreadPoolExecutor(int corePoolSize,
                          int maximumPoolSize,
                          long keepAliveTime,
                          TimeUnit unit,
                          BlockingQueue<Runnable> workQueue,
                          ThreadFactory threadFactory,
                          RejectedExecutionHandler handler)
//demo
ExecutorService pool = new ThreadPoolExecutor( 3, 5, 10,TimeUnit.SEcONDS, 
    new ArrayBlockingQueue<>(3),Executors.defaultThreadFactory(), 
    new ThreadPoolExecutor.AbortPolicy());
```
| å‚æ•°å                   | å«ä¹‰ä¸ä½œç”¨                                                                       | æ³¨æ„äº‹é¡¹                                             |
| :---                  | :---                                                                        | :---                                             |
| **`corePoolSize`**    | **æ ¸å¿ƒçº¿ç¨‹æ•°**ã€‚çº¿ç¨‹æ± ä¸­é•¿æœŸç»´æŒçš„çº¿ç¨‹æ•°é‡ï¼Œå³ä½¿è¿™äº›çº¿ç¨‹å¤„äºç©ºé—²çŠ¶æ€ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼ˆé™¤éè®¾ç½®äº† `allowCoreThreadTimeOut`ï¼‰ã€‚ | çº¿ç¨‹æ± åˆšåˆ›å»ºæ—¶ï¼Œå…¶ä¸­æ²¡æœ‰çº¿ç¨‹ã€‚æ¥æ–°ä»»åŠ¡æ—¶æ‰ä¼šåˆ›å»ºã€‚                        |
| **`maximumPoolSize`** | **æœ€å¤§çº¿ç¨‹æ•°**ã€‚çº¿ç¨‹æ± å…è®¸åˆ›å»ºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ã€‚                                                   | å½“å·¥ä½œé˜Ÿåˆ—æ»¡äº†ä¹‹åï¼Œæ–°æ¥çš„ä»»åŠ¡ä¼šå°è¯•åˆ›å»ºæ–°çº¿ç¨‹æ‰§è¡Œï¼Œç›´åˆ°çº¿ç¨‹æ•°è¾¾åˆ°æ­¤ä¸Šé™ã€‚            |
| **`keepAliveTime`**   | **çº¿ç¨‹ç©ºé—²å­˜æ´»æ—¶é—´**ã€‚å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡è¶…è¿‡ `corePoolSize` æ—¶ï¼Œå¤šä½™çš„ç©ºé—²çº¿ç¨‹åœ¨ç»ˆæ­¢å‰ç­‰å¾…æ–°ä»»åŠ¡çš„æœ€é•¿æ—¶é—´ã€‚           | ä»…é’ˆå¯¹è¶…è¿‡ `corePoolSize` çš„é‚£éƒ¨åˆ†çº¿ç¨‹ã€‚                     |
| **`unit`**            | **`keepAliveTime` å‚æ•°çš„æ—¶é—´å•ä½**ã€‚ä¾‹å¦‚ `TimeUnit.SECONDS`ã€`TimeUnit.MILLISECONDS`ã€‚  | æ˜¯ `java.util.concurrent.TimeUnit` æšä¸¾ç±»å‹çš„å€¼ã€‚        |
| **`workQueue`**       | **å·¥ä½œé˜Ÿåˆ—**ã€‚ç”¨äºä¿å­˜ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—ã€‚                                                  | **é€‰æ‹©ä¸åŒçš„é˜Ÿåˆ—å¯¹çº¿ç¨‹æ± è¡Œä¸ºå½±å“å·¨å¤§**ï¼ˆè§ä¸‹æ–‡è¡¥å……ï¼‰ã€‚                    |
| **`threadFactory`**   | **çº¿ç¨‹å·¥å‚**ã€‚ç”¨äºåˆ›å»ºæ–°çº¿ç¨‹çš„å·¥å‚ã€‚å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰çº¿ç¨‹çš„åç§°ã€ä¼˜å…ˆçº§ã€æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ç­‰ã€‚                              | å¦‚æœä¸æŒ‡å®šï¼Œä¼šä½¿ç”¨é»˜è®¤çš„ `Executors.defaultThreadFactory()`ã€‚ |
| **`handler`**         | **æ‹’ç»ç­–ç•¥å¤„ç†å™¨**ã€‚å½“çº¿ç¨‹æ± å·²ç»å…³é—­**æˆ–**çº¿ç¨‹æ•°å’Œé˜Ÿåˆ—éƒ½å·²è¾¾åˆ°ä¸Šé™ï¼ˆé¥±å’Œï¼‰æ—¶ï¼Œç”¨äºå¤„ç†æ–°æäº¤çš„ä»»åŠ¡çš„ç­–ç•¥ã€‚                   | å†…ç½®äº†4ç§ç­–ç•¥ï¼ˆè§ä¸‹æ–‡è¡¥å……ï¼‰ã€‚                                  |


**å·¥ä½œé˜Ÿåˆ— (`workQueue`) çš„å¸¸è§ç±»å‹**

| é˜Ÿåˆ—ç±»å‹                      | ç‰¹ç‚¹                                      | ä½¿ç”¨åœºæ™¯                                                                                                |
| :---                      | :---                                    | :---                                                                                                |
| **`SynchronousQueue`**    | ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚æ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„å¯¹åº”ç§»é™¤æ“ä½œã€‚    | `newCachedThreadPool` ä½¿ç”¨å®ƒã€‚ä»»åŠ¡æäº¤åç«‹å³å¯»æ‰¾ç©ºé—²çº¿ç¨‹æ‰§è¡Œï¼Œæ‰¾ä¸åˆ°å°±åˆ›å»ºæ–°çº¿ç¨‹ã€‚é€‚åˆå¤§é‡çŸ­å¼‚æ­¥ä»»åŠ¡ã€‚                                      |
| **`LinkedBlockingQueue`** | ä¸€ä¸ªåŸºäºé“¾è¡¨ç»“æ„çš„**æ— ç•Œ**é˜Ÿåˆ—ï¼ˆé™¤éæ˜¾å¼æŒ‡å®šå®¹é‡ï¼‰ã€‚FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€‚ | `newFixedThreadPool` å’Œ `newSingleThreadExecutor` ä½¿ç”¨å®ƒã€‚ç”±äºæ— ç•Œï¼Œ`maximumPoolSize` å‚æ•°ä¼šå¤±æ•ˆã€‚é€‚åˆä»»åŠ¡é‡æœªçŸ¥ï¼Œä½†å¯èƒ½å¾ˆå¤§çš„åœºæ™¯ã€‚ |
| **`ArrayBlockingQueue`**  | ä¸€ä¸ªåŸºäºæ•°ç»„ç»“æ„çš„**æœ‰ç•Œ**é˜Ÿåˆ—ã€‚FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€‚           | éœ€è¦é™åˆ¶é˜Ÿåˆ—å¤§å°æ—¶ä½¿ç”¨ã€‚æœ‰åŠ©äºé˜²æ­¢èµ„æºè€—å°½ã€‚                                                                              |

**æ‹’ç»ç­–ç•¥ (`handler`) çš„å†…ç½®å®ç°**

| ç­–ç•¥                                           | è¡Œä¸º                                             |
| :---                                         | :---                                           |
| **`ThreadPoolExecutor.AbortPolicy`**         | **é»˜è®¤ç­–ç•¥**ã€‚ç›´æ¥æŠ›å‡º `RejectedExecutionException` å¼‚å¸¸ã€‚ |
| **`ThreadPoolExecutor.CallerRunsPolicy`**    | ç”±æäº¤ä»»åŠ¡çš„**è°ƒç”¨è€…çº¿ç¨‹**è‡ªå·±æ¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚                      |
| **`ThreadPoolExecutor.DiscardPolicy`**       | ç›´æ¥é™é»˜åœ°ä¸¢å¼ƒè¿™ä¸ªæ— æ³•å¤„ç†çš„ä»»åŠ¡ï¼Œä¸åšä»»ä½•é€šçŸ¥ã€‚                       |
| **`ThreadPoolExecutor.DiscardOldestPolicy`** | ä¸¢å¼ƒå·¥ä½œé˜Ÿåˆ—ä¸­**æœ€æ—©**çš„é‚£ä¸ªæœªå¤„ç†ä»»åŠ¡ï¼Œç„¶åå°è¯•é‡æ–°æäº¤å½“å‰ä»»åŠ¡ã€‚            |


**ExecutorServiceå¸¸ç”¨æ–¹æ³•**
| æ–¹æ³•ç­¾å                                 | è¯´æ˜                                  |
| :---                                 | :---                                |
| `void execute(Runnable command)`     | æ‰§è¡Œ Runnable ä»»åŠ¡                      |
| `Future<T> submit(Callable<T> task)` | æ‰§è¡Œ Callable ä»»åŠ¡ï¼Œè¿”å›æœªæ¥ä»»åŠ¡å¯¹è±¡ï¼Œç”¨äºè·å–çº¿ç¨‹è¿”å›çš„ç»“æœ |
| `void shutdown()`                    | ç­‰å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†å…³é—­çº¿ç¨‹æ± ï¼                  |
| `List<Runnable> shutdownNow()`       | ç«‹åˆ»å…³é—­çº¿ç¨‹æ± ï¼Œåœæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›é˜Ÿåˆ—ä¸­æœªæ‰§è¡Œçš„ä»»åŠ¡      |

> å½“æ–°ä»»åŠ¡æäº¤æ—¶å‘ç°æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åˆ›å»ºä¸´æ—¶çº¿ç¨‹ï¼Œæ­¤æ—¶å°±ä¼šåˆ›å»ºä¸´æ—¶çº¿ç¨‹

##### Executors
JDK çš„ Executors(çº¿ç¨‹æ± çš„å·¥å…·ç±») ç±»ä¸­æä¾›äº†å‡ ç§å…·æœ‰ä»£è¡¨æ€§çš„çº¿ç¨‹æ± ï¼Œè¿™äº›çº¿ç¨‹æ± éƒ½æ˜¯åŸºäº ThreadPoolExecutor çš„å®šåˆ¶åŒ–å®ç°ã€‚

åœ¨å®é™…ä½¿ç”¨çº¿ç¨‹æ± çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä¸æ˜¯ç›´æ¥ä½¿ç”¨ ThreadPoolExecutor ï¼Œè€Œæ˜¯ä½¿ç”¨ JDK ä¸­æä¾›çš„å…·æœ‰ä»£è¡¨æ€§çš„çº¿ç¨‹æ± å®ä¾‹ã€‚
| æ–¹æ³•ç­¾å | è¯´æ˜ |ç¼ºç‚¹|
| :--- | :--- |:---|
| `public static ExecutorService newFixedThreadPool(int nThreads)` | åˆ›å»ºå›ºå®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡Œå¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹æ›¿ä»£å®ƒã€‚ |é˜Ÿåˆ—é•¿åº¦æ— æ³•æ§åˆ¶ï¼Œå®¹æ˜“OOM|
| `public static ExecutorService newSingleThreadExecutor()` | åˆ›å»ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± å¯¹è±¡ï¼Œå¦‚æœè¯¥çº¿ç¨‹å‡ºç°å¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚ |é˜Ÿåˆ—é•¿åº¦æ— æ³•æ§åˆ¶ï¼Œå®¹æ˜“OOM|
| `public static ExecutorService newCachedThreadPool()` | çº¿ç¨‹æ•°é‡éšç€ä»»åŠ¡å¢åŠ è€Œå¢åŠ ï¼Œå¦‚æœçº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸”ç©ºé—²äº†ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤60ç§’ï¼‰åˆ™ä¼šè¢«å›æ”¶æ‰ã€‚ |æœ€å¤§çº¿ç¨‹æ— æ³•æ§åˆ¶ï¼Œå®¹æ˜“OOM|
| `public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize)` | åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå¯ä»¥å®ç°åœ¨ç»™å®šçš„å»¶è¿Ÿåè¿è¡Œä»»åŠ¡ï¼Œæˆ–è€…å®šæœŸæ‰§è¡Œä»»åŠ¡ã€‚ |æœ€å¤§çº¿ç¨‹æ— æ³•æ§åˆ¶ï¼Œå®¹æ˜“OOM|

### Applet
åµŒå…¥ HTML çš„å°ç¨‹åºï¼Œå·²ç»è¿‡æ—¶ï¼Œä¸å¿…ç†ä¼šã€‚
### æ–‡æ¡£æ³¨é‡Š
åç»­å°†å¸¸ç”¨çš„ideaæ–‡æ¡£æ³¨é‡Šæ·»åŠ åˆ°è¿™é‡Œ

### Junitå•å…ƒæµ‹è¯•
ä½œç”¨ï¼šç¼–å†™æµ‹è¯•ä»£ç å¯¹æ–¹æ³•è¿›è¡Œæ­£ç¡®æ€§æµ‹è¯•ï¼Œå¾ˆå¤šå¼€å‘å·¥å…·å·²ç»é›†æˆäº†Junitæ¡†æ¶ï¼Œæ¯”å¦‚IDEA
```java
public class DemoTest{
    //æµ‹è¯•æ–¹æ³•å¿…é¡»æ˜¯ publicï¼Œå¿…é¡»æœ‰æ³¨è§£@Test
    @Test
    public void TestDemo1(){
        //xxxx
        //æ–­è¨€ç›¸å…³ï¼Œç•¥  
    }
}
```

## æ³¨è§£
æ³¨è§£å°±æ˜¯Javaä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°ï¼Œæ¯”å¦‚:@Overrideã€@Testç­‰ï¼›ä½œç”¨æ˜¯:å¯¹Javaä¸­çš„ç±»ã€æ–¹æ³•ã€æˆå‘˜å˜é‡åšæ ‡è®°ï¼Œç„¶åè¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚

### è‡ªå®šä¹‰æ³¨è§£
æ ¼å¼ï¼š`public @interface æ³¨è§£å {public å±æ€§ç±»å‹ å±æ€§å() default é»˜è®¤å€¼}`
ç‰¹æ®Šå±æ€§åï¼švalue
- å¦‚æœæ³¨è§£åªæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œä½¿ç”¨æ³¨è§£æ—¶ï¼Œvalueåç§°å¯ä»¥ä¸å†™ï¼›åœ¨å…¶ä»–valueéƒ½æœ‰defaultæ—¶ï¼Œä¹Ÿå¯ä»¥çœç•¥ã€‚
- @interfaceçš„æœ¬è´¨æ—¶ï¼Œç»§æ‰¿äº†Annotationæ¥å£çš„æ¥å£ã€‚
- @æ³¨è§£(...)ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªå®ç°ç±»å¯¹è±¡ï¼Œå®ç°äº†è¯¥æ³¨è§£ä»¥åŠAnnotationæ¥å£ã€‚åç¼–è¯‘å¯ä»¥æŸ¥çœ‹ã€‚
egï¼š
```java
//è‡ªå®šä¹‰æ³¨è§£
public @interface MyBook{
    String name();
    int age() default 18;
    String[] address();
}

// åˆ›å»ºæœ€ç®€å•çš„åˆ‡é¢ï¼š
@Aspect
@Component
public class MyBookAspect {

    @Before("@annotation(MyBook)")
    public void printOne() {
        System.out.println("1");
    }
}

//ç‰¹æ®Šæ³¨è§£
public @interface A{
    String value();//å¦‚æœæ³¨è§£åªæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œä½¿ç”¨æ³¨è§£æ—¶ï¼Œvalueåç§°å¯ä»¥ä¸å†™ã€‚
    String val() default 1;//åœ¨å…¶ä»–valueéƒ½æœ‰defaultæ—¶ï¼Œä¹Ÿå¯ä»¥çœç•¥ã€‚
}
//ä½¿ç”¨æ³¨è§£
@MyBook(name="æ—…è¡Œè€…"ï¼Œage= 18,address{"æç“¦ç‰¹"ï¼Œ"è’™å¾·"})
@A("value")
public class Demo{}
```

### å…ƒæ³¨è§£

JDK ä¸­è™½ç„¶å†…ç½®äº†å‡ ä¸ªæ³¨è§£ï¼Œä½†è¿™è¿œè¿œä¸èƒ½æ»¡è¶³å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„åƒå˜ä¸‡åŒ–çš„éœ€æ±‚ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰æ³¨è§£ï¼Œè€Œè¿™å°±éœ€è¦ç”¨åˆ°å…ƒæ³¨è§£ã€‚

**å…ƒæ³¨è§£çš„ä½œç”¨å°±æ˜¯ç”¨äºå®šä¹‰å…¶å®ƒçš„æ³¨è§£**ã€‚

Java ä¸­æä¾›äº†ä»¥ä¸‹å…ƒæ³¨è§£ç±»å‹ï¼š

- `@Retention`
- `@Target`
- `@Documented`
- `@Inherited`ï¼ˆJDK8 å¼•å…¥ï¼‰
- `@Repeatable`ï¼ˆJDK8 å¼•å…¥ï¼‰

è¿™äº›ç±»å‹å’Œå®ƒä»¬æ‰€æ”¯æŒçš„ç±»åœ¨ `java.lang.annotation` åŒ…ä¸­å¯ä»¥æ‰¾åˆ°ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹æ¯ä¸ªå…ƒæ³¨è§£çš„ä½œç”¨å’Œç›¸åº”åˆ†å‚æ•°çš„ä½¿ç”¨è¯´æ˜ã€‚
#### @Documented

[`@Documented`](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Documented.html) è¡¨ç¤ºæ— è®ºä½•æ—¶ä½¿ç”¨æŒ‡å®šçš„æ³¨è§£ï¼Œéƒ½åº”ä½¿ç”¨ Javadocï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ³¨é‡Šä¸åŒ…å«åœ¨ Javadoc ä¸­ï¼‰ã€‚æ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒï¼š[Javadoc tools page](https://docs.oracle.com/javase/8/docs/technotes/guides/javadoc/index.html)ã€‚



#### @Retention

**[`@Retention`](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html) æŒ‡æ˜äº†æ³¨è§£çš„ä¿ç•™çº§åˆ«ã€‚**

`@Retention` æºç ï¼š

```java
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.ANNOTATION_TYPE)
public @interface Retention {
    RetentionPolicy value();
}
```

`RetentionPolicy` æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒå®šä¹‰äº†è¢« `@Retention` ä¿®é¥°çš„æ³¨è§£æ‰€æ”¯æŒçš„ä¿ç•™çº§åˆ«ï¼š

- `RetentionPolicy.SOURCE` - ä»…åœ¨æºæ–‡ä»¶ä¸­æœ‰æ•ˆï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥ã€‚
- `RetentionPolicy.CLASS` - é»˜è®¤å€¼ï¼Œåœ¨ class æ–‡ä»¶ä¸­æœ‰æ•ˆï¼ŒJVM ä¼šå¿½ç•¥ã€‚
- `RetentionPolicy.RUNTIME` - åœ¨è¿è¡Œæ—¶æœ‰æ•ˆã€‚



#### @Target

**[`@Target`](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html) æŒ‡å®šæ³¨è§£å¯ä»¥ä¿®é¥°çš„å…ƒç´ ç±»å‹ã€‚**

`@Target` æºç ï¼š

```java
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.ANNOTATION_TYPE)
public @interface Target {
    ElementType[] value();
}
```

`ElementType` æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒå®šä¹‰äº†è¢« `@Target` ä¿®é¥°çš„æ³¨è§£å¯ä»¥åº”ç”¨çš„èŒƒå›´ï¼š

- `ElementType.ANNOTATION_TYPE` - åº”ç”¨äºæ³¨è§£ç±»å‹ã€‚
- `ElementType.CONSTRUCTOR` - åº”ç”¨äºæ„é€ å‡½æ•°ã€‚
- `ElementType.FIELD` - åº”ç”¨äºå­—æ®µæˆ–å±æ€§ã€‚
- `ElementType.LOCAL_VARIABLE` - åº”ç”¨äºå±€éƒ¨å˜é‡ã€‚
- `ElementType.METHOD` - åº”ç”¨äºæ–¹æ³•ã€‚
- `ElementType.PACKAGE` - åº”ç”¨äºåŒ…å£°æ˜ã€‚
- `ElementType.PARAMETER` - åº”ç”¨äºæ–¹æ³•çš„å‚æ•°ã€‚
- `ElementType.TYPE` - åº”ç”¨äºç±»çš„ä»»ä½•å…ƒç´ ã€‚

`@Target` ç¤ºä¾‹ï¼š

```java
//è‡ªå®šä¹‰æ³¨è§£
@Target(ElementType.TYPE)
public @interface Table {
    /**
     * æ•°æ®è¡¨åç§°æ³¨è§£ï¼Œé»˜è®¤å€¼ä¸ºç±»åç§°
     * @return
     */
    public String tableName() default "className";
}
//ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£
@Table()
public class Demo{}
```

#### @Inherited

**[`@Inherited`](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Inherited.html) è¡¨ç¤ºæ³¨è§£ç±»å‹å¯ä»¥è¢«ç»§æ‰¿ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸æ˜¯è¿™æ ·ï¼‰**ã€‚

è¡¨ç¤ºè‡ªåŠ¨ç»§æ‰¿æ³¨è§£ç±»å‹ã€‚ å¦‚æœæ³¨è§£ç±»å‹å£°æ˜ä¸­å­˜åœ¨ `@Inherited` å…ƒæ³¨è§£ï¼Œåˆ™æ³¨è§£æ‰€ä¿®é¥°ç±»çš„æ‰€æœ‰å­ç±»éƒ½å°†ä¼šç»§æ‰¿æ­¤æ³¨è§£ã€‚

> ğŸ”” æ³¨æ„ï¼š`@Inherited` æ³¨è§£ç±»å‹æ˜¯è¢«æ ‡æ³¨è¿‡çš„ç±»çš„å­ç±»æ‰€ç»§æ‰¿ã€‚ç±»å¹¶ä¸ä»å®ƒæ‰€å®ç°çš„æ¥å£ç»§æ‰¿æ³¨è§£ï¼Œæ–¹æ³•å¹¶ä¸ä»å®ƒæ‰€è¦†å†™çš„æ–¹æ³•ç»§æ‰¿æ³¨è§£ã€‚
>
> æ­¤å¤–ï¼Œå½“ `@Inherited` ç±»å‹æ ‡æ³¨çš„æ³¨è§£çš„ `@Retention` æ˜¯ `RetentionPolicy.RUNTIME`ï¼Œåˆ™åå°„ API å¢å¼ºäº†è¿™ç§ç»§æ‰¿æ€§ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ `java.lang.reflect` å»æŸ¥è¯¢ä¸€ä¸ª `@Inherited` ç±»å‹çš„æ³¨è§£æ—¶ï¼Œåå°„ä»£ç æ£€æŸ¥å°†å±•å¼€å·¥ä½œï¼šæ£€æŸ¥ç±»å’Œå…¶çˆ¶ç±»ï¼Œç›´åˆ°å‘ç°æŒ‡å®šçš„æ³¨è§£ç±»å‹è¢«å‘ç°ï¼Œæˆ–è€…åˆ°è¾¾ç±»ç»§æ‰¿ç»“æ„çš„é¡¶å±‚ã€‚

```java
@Inherited
public @interface Greeting {
    public enum FontColor{ BULE,RED,GREEN};
    String name();
    FontColor fontColor() default FontColor.GREEN;
}
```

#### @Repeatable

**[`@Repeatable`](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Repeatable.html) è¡¨ç¤ºæ³¨è§£å¯ä»¥é‡å¤ä½¿ç”¨ã€‚**

ä»¥ Spring `@Scheduled` ä¸ºä¾‹ï¼š

```java
@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Schedules {
	Scheduled[] value();
}

@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Repeatable(Schedules.class)
public @interface Scheduled {
  // ...
}
```

åº”ç”¨ç¤ºä¾‹ï¼š

```java
public class TaskRunner {

    @Scheduled("0 0/15 * * * ?")
    @Scheduled("0 0 12 * ?")
    public void task1() {}
}
```
### æ³¨è§£çš„è§£æ
ä¸»è¦æ˜¯é€šè¿‡AnnotatedElementæ¥å£é‡Œé¢çš„æ–¹æ³•æ¥è§£æï¼š
| AnnotatedElementçš„æ–¹æ³• | è¯´æ˜ |
| :--- | :--- |
| `public Annotation[] getDeclaredAnnotations()` | è·å–å½“å‰å¯¹è±¡ä¸Šé¢çš„æ³¨è§£ |
| `public T getDeclaredAnnotation(Class<T> annotationClass)` | è·å–æŒ‡å®šçš„æ³¨è§£å¯¹è±¡ |
| `public boolean isAnnotationPresent(Class<Annotation> annotationClass)` | åˆ¤æ–­å½“å‰å¯¹è±¡ä¸Šæ˜¯å¦å­˜åœ¨æŸä¸ªæ³¨è§£ |

ç¤ºä¾‹ï¼š
```java
//è§£æç±»ä¸Šé¢çš„æ³¨è§£
public void parseClass() throws Exception{
    Class c1 = Demo.class;//Demoç±»ä¸­ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼›ç±»å’Œæ–¹æ³•éƒ½æœ‰ä¸€ä¸ªæ³¨è§£
    if(c1.isAnnotationPresent(A.class)){//A.class æ˜¯æ³¨è§£ç±» @interface
        A a = c1.getAnnotation(A.class);
        a.getxxx;//è¿™é‡Œå¯ä»¥è·å–æ³¨è§£Aï¼Œç±»çš„å„ç§å±æ€§
    }
}
//è§£ææ–¹æ³•ä¸Šé¢çš„æ³¨è§£
public void parseMethod(){
     Class c1 = Demo.class;
     Method method = c1.getMethod("go");
     if(c1.isAnnotationPresent(A.class)){
        A a = method.getDeclareAnnotation(A.class);
         a.getxxx;//è¿™é‡Œå¯ä»¥è·å–æ³¨è§£Aï¼Œç±»çš„å„ç§å±æ€§
     }
}
```
### åŠ¨æ€ä»£ç†
æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œç±»ä¼¼æ˜æ˜Ÿä¸­ä»‹å…¬å¸ä¸‹çš„ä»£ç†äººï¼Œç»™æ˜æ˜Ÿä»£ç†ã€‚
ä¸­ä»‹å…¬å¸å°±æ˜¯æ¥å£ï¼Œä»£ç†å¯¹è±¡å’Œè¢«ä»£ç†å¯¹è±¡éƒ½éœ€è¦å®ç°è¿™ä¸ªæ¥å£

**java.lang.reflect.Proxy ç±»**
Proxy è¿™ä¸ªç±»çš„ä½œç”¨å°±æ˜¯ç”¨æ¥åŠ¨æ€åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡çš„ç±»ï¼Œå®ƒæä¾›äº†è®¸å¤šçš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨çš„æœ€å¤šçš„å°±æ˜¯ newProxyInstance è¿™ä¸ªæ–¹æ³•ï¼š
```java
public static Object newProxyInstance(ClassLoader loader, Class<?>[] interfaces,  InvocationHandler h)  throws IllegalArgumentException
```
è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯å¾—åˆ°ä¸€ä¸ªåŠ¨æ€çš„ä»£ç†å¯¹è±¡ã€‚
å‚æ•°è¯´æ˜ï¼š
- loader - å†³å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨å»åŠ è½½ç”Ÿæˆä»£ç†ç±»ã€‚
- interfaces - å†³å®šæŒ‡å®šä»£ç†ç±»éœ€è¦å®ç°çš„æ¥å£ã€‚
- h - å†³å®šæŒ‡å®šä»£ç†ç±»éœ€è¦å¦‚ä½•å»ä»£ç†ï¼ˆä»£ç†éœ€è¦åšçš„äº‹æƒ…ï¼‰
eg:
```java
//æ¥å£
public interface StarService{
    void sing(String name);
    String dance();
}
//æ˜æ˜Ÿç±»
public class Star implements StarService{
    private String name;
    @Override
    public void sing(String name){
        System.out.println("æ˜æ˜Ÿå”±æ­Œ")
    }
    @Override
    public String dance(){
        return "xx";
    }
}
//ä»£ç†å·¥å…·ç±»ï¼Œå°±æ˜¯ä¸­ä»‹å…¬å¸
public class ProxyUtil{
    //è¿”å›ç±»å‹ï¼Œè¿˜èƒ½åŠ å…¥æ³›å‹
    public Static StarService createProxy(Star s){
        StarService proxy = (StarService) Proxy.newProxyInstance(ProxyUtil.class.getClassLoader(),
        s.getClass.getInterfaces(),new InvocationHandler(){
            @Override//proxy ä»£ç†å¯¹è±¡æœ¬èº«ï¼Œmethod ä»£è¡¨æ­£åœ¨è¢«ä»£ç†çš„æ–¹æ³•ï¼ˆsing()ã€dance()ï¼‰ï¼Œargs æ­£åœ¨è¢«ä»£ç†çš„æ–¹æ³•çš„å‚æ•°
            public Object invoke(Object proxy,Method method,Object[] args) throws Throwable{
                //ç”¨æ¥å£°æ˜ä»£ç†å¯¹è±¡è¦å¹²çš„äº‹æƒ…
                String methodName = method.getName();
                if("sing".equals(methodName)){
                    System.out.println("å‡†å¤‡è¯ç­’ï¼Œæ”¶èµ·20w");
                }else if("dance".equals(methodName)){
                    System.out.println("å‡†å¤‡åœºåœ°ï¼Œæ”¶èµ·200w");
                }

                //=====è¿™é‡Œå¯ä»¥å¤„ç†danceå’Œsingä¸­é‡å¤çš„ä»£ç ï¼Œæ¯”å¦‚è®¡ç®—æ–¹æ³•å¤„ç†æ—¶é—´ã€‚

                Objcet res = method.invoke(s,args);//æ˜æ˜Ÿå¹²æ´»å„¿äº†ï¼Œè°ƒç”¨Starä¸­çš„æ–¹æ³•
                return res;
            }
        });
        return proxy;//è¿”å›è¿™ä¸ªæ˜æ˜Ÿå¯¹è±¡çš„ä»£ç†å¯¹è±¡;
    }
}
//demo
Star star = new Star("åˆ˜äº¦è²");
StarService proxy = ProxyUtil.createProxy(star);//ä»£ç†äºº
proxy.sing("ç”Ÿæ—¥å¿«ä¹");
System.out.println(proxy.dance());


```
## MySql è¿æ¥
1. [ä¸‹è½½é©±åŠ¨ jar](https://static.jyshare.com/download/mysql-connector-java-8.0.16.jar)
2. ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š
```java
package com.runoob.test;
 
import java.sql.*;
 
public class MySQLDemo {
 
    // MySQL 8.0 ä»¥ä¸‹ç‰ˆæœ¬ - JDBC é©±åŠ¨ååŠæ•°æ®åº“ URL
    static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";  
    static final String DB_URL = "jdbc:mysql://localhost:3306/RUNOOB";
 
    // MySQL 8.0 ä»¥ä¸Šç‰ˆæœ¬ - JDBC é©±åŠ¨ååŠæ•°æ®åº“ URL
    //static final String JDBC_DRIVER = "com.mysql.cj.jdbc.Driver";  
    //static final String DB_URL = "jdbc:mysql://localhost:3306/RUNOOB?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC";
 
 
    // æ•°æ®åº“çš„ç”¨æˆ·åä¸å¯†ç ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„è®¾ç½®
    static final String USER = "root";
    static final String PASS = "123456";
 
    public static void main(String[] args) {
        Connection conn = null;
        Statement stmt = null;
        try{
            // æ³¨å†Œ JDBC é©±åŠ¨
            Class.forName(JDBC_DRIVER);
        
            // æ‰“å¼€é“¾æ¥
            System.out.println("è¿æ¥æ•°æ®åº“...");
            conn = DriverManager.getConnection(DB_URL,USER,PASS);
        
            // æ‰§è¡ŒæŸ¥è¯¢
            System.out.println(" å®ä¾‹åŒ–Statementå¯¹è±¡...");
            stmt = conn.createStatement();
            String sql;
            sql = "SELECT id, name, url FROM websites";
            ResultSet rs = stmt.executeQuery(sql);
        
            // å±•å¼€ç»“æœé›†æ•°æ®åº“
            while(rs.next()){
                // é€šè¿‡å­—æ®µæ£€ç´¢
                int id  = rs.getInt("id");
                String name = rs.getString("name");
                String url = rs.getString("url");
    
                // è¾“å‡ºæ•°æ®
                System.out.print("ID: " + id);
                System.out.print(", ç«™ç‚¹åç§°: " + name);
                System.out.print(", ç«™ç‚¹ URL: " + url);
                System.out.print("\n");
            }
            // å®Œæˆåå…³é—­
            rs.close();
            stmt.close();
            conn.close();
        }catch(SQLException se){
            // å¤„ç† JDBC é”™è¯¯
            se.printStackTrace();
        }catch(Exception e){
            // å¤„ç† Class.forName é”™è¯¯
            e.printStackTrace();
        }finally{
            // å…³é—­èµ„æº
            try{
                if(stmt!=null) stmt.close();
            }catch(SQLException se2){
            }// ä»€ä¹ˆéƒ½ä¸åš
            try{
                if(conn!=null) conn.close();
            }catch(SQLException se){
                se.printStackTrace();
            }
        }
        System.out.println("Goodbye!");
    }
}
```


### Java 8æ–°ç‰¹æ€§
#### Lambda
å¯ä»¥æ›¿ä»£æŸäº›**å‡½æ•°å¼æ¥å£**çš„å†…éƒ¨ç±»çš„å¯¹è±¡ï¼Œè®©ä»£ç æ›´åŠ ç®€æ´ã€‚
è€Œå‡½æ•°å¼æ¥å£å°±æ˜¯ï¼šæœ‰ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚
> @FunctionalInterface æ˜¯ä¸“é—¨ç»™å‡½æ•°å¼æ¥å£ä¸­çš„æ³¨è§£ï¼Œå£°æ˜ååªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚
æ ¼å¼ï¼š`(args)->{}`

å®ä¾‹ï¼šå¯ä»¥ç®€åŒ–é›†åˆé‡Œé¢çš„comparatorçš„å†™æ³•,å¦‚å°†ä¸Šæ–‡çš„ comparator ç®€å†™ä¸ºä¸‹é¢ï¼š
```java
//åˆæ­¥çœç•¥
Arrays.sort(arr,(Integer o1, Integer o2) -> {return o1-o2});
//å‚æ•°ç±»å‹ä¹Ÿå¯ä»¥ä¸å†™
Arrays.sort(arr,(o1, o2) -> {return o1-o2});
//æ–¹æ³•ä½“åªæœ‰ä¸€è¡Œä»£ç æ—¶ï¼Œå¤§æ‹¬å·å¯ä»¥ä¸å†™ï¼Œâ€œ;â€çœç•¥ï¼Œå¦‚æœå¼returnè¯­å¥ï¼Œreturnä¹Ÿä¸å†™ã€‚
Arrays.sort(arr,(o1, o2) ->  o1-o2);
//åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å€™ï¼Œå°æ‹¬å·ä¹Ÿå¯ä»¥çœç•¥
btn.btn.addActionListener(e->{});
```
##### æ–¹æ³•å¼•ç”¨
1. é™æ€æ–¹æ³•å¼•ç”¨
ä½¿ç”¨åœºæ™¯ï¼šlambda è¡¨è¾¾å¼åªè°ƒç”¨äº†ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¹¶ä¸”â€œ->â€å‰åæ–¹æ³•å‚æ•°å½¢å¼ä¸€è‡´ã€‚
æ ¼å¼ï¼šç±»å::é™æ€æ–¹æ³•

ç¤ºä¾‹1ï¼š
```java
Arrays.sort(arr,(o1, o2) ->  orderArr(o1,o2));
//åƒè¿™æ ·çš„æƒ…å†µï¼ŒorderArr æ˜¯é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¿›ä¸€æ­¥ç®€å†™ã€‚å…¶ä¸­ integer å¯ä»¥æ¢æˆ student ä¸­çš„ age å»ç†è§£
Arrays.sort(arr,Integer::orderArr)
```

ç¤ºä¾‹2ï¼š
```java
arr.forEach(e -> System.out.println(1))
arr.forEach(System.out::println(1))
```



2. å®ä¾‹æ–¹æ³•å¼•ç”¨
ä½¿ç”¨åœºæ™¯ï¼šlambda è¡¨è¾¾å¼åªé€šè¿‡å¯¹è±¡åè°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå¹¶ä¸”â€œ->â€å‰åæ–¹æ³•å‚æ•°å½¢å¼ä¸€è‡´ã€‚
æ ¼å¼ï¼šå¯¹è±¡å::å®ä¾‹æ–¹æ³•
```java
Arrays.sort(arr,(o1, o2) ->  obj.orderArr(o1,o2));
//ç®€å†™ä¸º
Arrays.sort(arr,obj::orderArr);
```
3. ç‰¹å®šç±»çš„æ–¹æ³•å¼•ç”¨
ä½¿ç”¨åœºæ™¯ï¼šlambda è¡¨è¾¾å¼åªè°ƒç”¨äº†ä¸€ä¸ªç‰¹å®šç±»å‹çš„å®ä¾‹æ–¹æ³•ï¼Œå¹¶ä¸”å‰é¢å‚æ•°åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ–¹æ³•çš„ä¸»è°ƒï¼Œå…¶ä»–æ‰€æœ‰å‚æ•°éƒ½æ˜¯è¢«è°ƒç”¨æ–¹æ³•çš„å‚æ•°ã€‚
æ ¼å¼ï¼šç‰¹å®šç±»çš„åç§°::æ–¹æ³•
```java
String[] arr = {"angel","bro","andy"};
//å¿½ç•¥è‹±æ–‡å¤§å°å†™æ’åº
Arrays.sort(arr,(o1, o2) ->  {
    return o1.compareToIngnoreCase(o2);
});
//ä½¿ç”¨ç‰¹å®šç±»çš„æ–¹æ³•å¼•ç”¨ï¼Œå¯ä»¥ç®€å†™ä¸º
Arrays.sort(arr,String::compareToIngnoreCase)
```

4. æ„é€ å™¨å¼•ç”¨
ä½¿ç”¨åœºæ™¯ï¼šlambda è¡¨è¾¾å¼é‡Œé¢åªåˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”â€œ->â€å‰åæ–¹æ³•å‚æ•°å½¢å¼ä¸€è‡´ã€‚
æ ¼å¼ï¼šç±»å::new
ç¤ºä¾‹1ï¼š
```java
@FunctionalInterface
interface CarFactory{
    Car getCar(String name);
}
// lambda è¡¨è¾¾å¼æ”¹å†™å†…éƒ¨ç±»å¦‚ä¸‹
CarFactory cf = name -> new Car(name);
//ä½¿ç”¨æ„é€ å™¨å¼•ç”¨ï¼Œæ”¹å†™ä¸º
CarFactory cf = Car::new;

Car ca = cf.getCar("xxx");
```

ç¤ºä¾‹2ï¼š
```java
//JDK11 æ‰æœ‰
ArrayList<String> list = xxx;
String[] arr = list.toArray(String::new);
```

#### Stream
ç”¨äºæ“ä½œé›†åˆæˆ–è€…æ•°ç»„çš„æ•°æ®ï¼Œæ€§èƒ½é«˜æ•ˆï¼Œç»“åˆäº†å¤§é‡lambdaè¡¨è¾¾å¼ï¼Œä»£ç ç®€æ´ï¼Œå¯è¯»æ€§å¥½ã€‚

1. è·å–Streamæµ
- é›†åˆä¸­ Collection ä¸­å°è£…äº† `default Stream<E> stream()`ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚
    + å•åˆ—é›†åˆè°ƒç”¨è¿™ä¸ªCollectinä¸­streamè·å–æµ
    + åŒåˆ—é›†åˆç”¨`map.keySet().stream();map.values().stream();map.entrySet().stream()`è·å–streamæµ
- æ•°ç»„ä¸­ï¼š
    + Arraysç±»æä¾›äº†`public static<T> stream<T> stream(T[] array)`ï¼›
    + Streamç±»æä¾›äº†`public static<T> Stream<T> of(T... values)`

2. Streamæµå¸¸ç”¨ä¸­é—´æ–¹æ³•
| æ–¹æ³•å                                                                    | è¯´æ˜                                 |
|------------------------------------------------------------------------|------------------------------------|
| :--------------------------------------------------------------------- | :--------------------------------- |
| `Stream<T> filter(Predicate<? super T> predicate)`                     | ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚                      |
| `Stream<T> sorted()`                                                   | å¯¹å…ƒç´ è¿›è¡Œå‡åºæ’åºã€‚                         |
| `Stream<T> sorted(Comparator<? super T> comparator)`                   | æŒ‰ç…§æŒ‡å®šè§„åˆ™æ’åºã€‚                          |
| `Stream<T> limit(long maxSize)`                                        | è·å–å‰å‡ ä¸ªå…ƒç´ ã€‚                           |
| `Stream<T> skip(long n)`                                               | è·³è¿‡å‰å‡ ä¸ªå…ƒç´ ã€‚                           |
| `Stream<T> distinct()`                                                 | å»é™¤æµä¸­é‡å¤çš„å…ƒç´ ã€‚                         |
| `<R> Stream<R> map(Function<? super T, ? extends R> mapper)`           | å¯¹å…ƒç´ è¿›è¡ŒåŠ å·¥ï¼Œå¹¶è¿”å›å¯¹åº”çš„æ–°æµã€‚                  |
| `static <T> Stream<T> concat(Stream a, Stream b)`                      | åˆå¹¶aå’Œbä¸¤ä¸ªæµä¸ºä¸€ä¸ªæµã€‚                      |

3. Streamå¸¸ç”¨ç»ˆç»“æ–¹æ³•
ç»ˆç»“æ–¹æ³•ï¼šè·å–å¤„ç†çš„ç»“æœçš„æ–¹æ³•ã€‚
| æ–¹æ³•å                                                                       | è¯´æ˜                   |
|---------------------------------------------------------------------------|----------------------|
| `void forEach(Consumer<? super T> action)`                                | å¯¹æ­¤æµè¿ç®—åçš„å…ƒç´ æ‰§è¡Œéå†        |
| `long count()`                                                            | ç»Ÿè®¡æ­¤æµè¿ç®—åçš„å…ƒç´ ä¸ªæ•°         |
| `Optional<T> max(Comparator<? super T> comparator)`                       | è·å–æ­¤æµè¿ç®—åçš„æœ€å¤§å€¼å…ƒç´         |
| `Optional<T> min(Comparator<? super T> comparator)`                       | è·å–æ­¤æµè¿ç®—åçš„æœ€å°å€¼å…ƒç´         |
| `Object[] toArray()`                                                      | æŠŠæµå¤„ç†åçš„ç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæ•°ç»„ä¸­å»    |
| `R collect(Collector collector)`                                          | æŠŠæµå¤„ç†åçš„ç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæŒ‡å®šçš„é›†åˆä¸­å» |
| `boolean anyMatch(Predicate<? super T> predicate)`                                          | å®ƒæ¥å—ä¸€ä¸ªè°“è¯ï¼ˆPredicateï¼‰ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæµä¸­æ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªå…ƒç´ æ»¡è¶³ç»™å®šçš„è°“è¯æ¡ä»¶ã€‚ |


| **Collectorså·¥å…·ç±»æ–¹æ³•**                                                       | **è¯´æ˜**               |
| `public static <T> Collector toList()`                                    | æŠŠå…ƒç´ æ”¶é›†åˆ°Listé›†åˆä¸­        |
| `public static <T> Collector toSet()`                                     | æŠŠå…ƒç´ æ”¶é›†åˆ°Seté›†åˆä¸­         |
| `public static Collector toMap(Function keyMapper, Function valueMapper)` | æŠŠå…ƒç´ æ”¶é›†åˆ°Mapé›†åˆä¸­         |




## å‚è€ƒ
- https://www.runoob.com/java
- https://www.bilibili.com/video/BV1gb42177hm
- https://dunwu.github.io/
